<%= turbo_stream.remove "#{params[:target]}-load-page-#{@page.number}" %>

<%= turbo_stream.append params[:target] do %>
  <%= render partial: "bubbles/cards/mini", collection: @page.records, as: :bubble, cached: true %>
<% end %>

<% unless @page.last? %>
  <%= turbo_stream.append params[:target] do %>
    <%= link_to "Load more...",
          listed_bubbles_path(target: params[:target], page: @page.next_param, **@filter.as_params),
          id: "#{params[:target]}-load-page-#{@page.next_param}",
          data: { turbo_stream: true } %>
  <% end %>
<% end %>
