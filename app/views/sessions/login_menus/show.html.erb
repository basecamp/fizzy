<% @page_title = "Choose an account" %>

<% cache [ Current.identity_token, @tenants ] do %>
  <div
    class="panel panel--centered flex flex-column gap-half"
    style="--popup-icon-size: 24px; --popup-item-padding-inline: 0.5rem;"
  >
    <% if @tenants.present? %>
      <h1 class="txt-x-large font-weight-black margin-none">
        Your BOXCAR accounts
      </h1>
      <menu class="popup__list pad border-radius border">
        <% @tenants.each do |tenant| %>
          <li class="popup__item txt-medium">
            <%= icon_tag "marker", class: "popup__icon" %>
            <%= link_to new_session_start_url(script_name: "/#{tenant.id}"), class: "btn overflow-ellipsis fill-transparent popup__btn" do %>
              <strong><%= tenant.name %></strong>
            <% end %>
          </li>
        <% end %>
      </menu>
    <% else %>
      <h1 class="txt-x-large font-weight-black margin-none">Hmm...</h1>
      <p class="margin-none-block-start">You donâ€™t have any BOXCAR accounts.</p>
    <% end %>

    <% if defined?(saas) %>
      <div class="margin-block-start">
        <%= link_to saas.new_signup_completion_path, class: "btn btn--plain txt-link center txt-small" do %>
          <span>Sign up for a new BOXCAR account</span>
        <% end %>
      </div>
    <% end %>
  </div>
<% end %>

<% content_for :footer do %>
  <%= render "sessions/footer" %>
<% end %>
